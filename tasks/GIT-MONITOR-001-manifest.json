{
  "task_id": "GIT-MONITOR-001",
  "category": "C",
  "priority": "medium",
  "estimated_duration": "2-3 hours",
  "schedule": "daily at 6:00 AM",
  "recurrence": "daily",

  "description": "Set up automated git status monitoring across all AI projects with daily cron jobs to track uncommitted changes and unpushed commits",
  "success_criteria": [
    "Cron job runs daily at 6 AM (Billy's morning routine)",
    "Monitor all projects in G:/ai, F:/ai, C:/ai directories",
    "Generate daily summary with project counts (clean vs dirty)",
    "Create actionable morning summary for Claude",
    "Track projects with uncommitted changes older than 3 days"
  ],
  "deliverables": [
    "~/openclaw-workspace/automation/git_status_monitor.sh",
    "~/openclaw-workspace/automation/git_status_cron_setup.sh",
    "~/openclaw-workspace/.signals/morning_summary.md",
    "~/openclaw-workspace/.signals/GIT-MONITOR-001-complete.json"
  ],

  "pattern_reference": {
    "previous_task_id": "N/A - First implementation",
    "template_file": "G:/ai/git-status-all.py",
    "description": "Follow pattern from existing git-status-all.py script"
  },

  "input_files": [
    "G:/ai/git-status-all.py"
  ],
  "data_sources": {
    "primary": "Git repositories in G:/ai, F:/ai, C:/ai",
    "fallback": "N/A",
    "rate_limit": "N/A",
    "expected_update_frequency": "daily"
  },
  "reference_docs": [
    "C:/Users/ghigh/.claude/CLAUDE.md (Git Status Tracking section)"
  ],

  "steps": [
    {
      "step": 1,
      "action": "Create git_status_monitor.sh script that runs python G:/ai/git-status-all.py --dirty and parses output",
      "validation": "Script executes successfully, outputs count of dirty projects"
    },
    {
      "step": 2,
      "action": "Add logic to track uncommitted changes older than 3 days (use git log -1 --format=%at to get last commit timestamp)",
      "validation": "Script correctly identifies stale projects (uncommitted changes >3 days old)"
    },
    {
      "step": 3,
      "action": "Generate morning_summary.md with format:\n- Total projects scanned\n- Projects with uncommitted changes\n- Projects with unpushed commits\n- Projects with stale changes (>3 days)\n- Action items for Claude (if dirty count > 0)",
      "validation": "morning_summary.md follows template format, includes all required sections"
    },
    {
      "step": 4,
      "action": "Create git_status_cron_setup.sh that adds cron job: 0 6 * * * bash ~/openclaw-workspace/automation/git_status_monitor.sh",
      "validation": "crontab -l shows the new cron job entry"
    },
    {
      "step": 5,
      "action": "Test git_status_monitor.sh manually to verify it works correctly",
      "validation": "Script runs without errors, morning_summary.md generated with current data"
    },
    {
      "step": 6,
      "action": "Create completion signal with setup instructions for Claude",
      "validation": "Completion signal includes next steps: verify cron job, review first morning summary"
    }
  ],

  "monitoring_rules": {
    "anomaly_detection": [
      {
        "metric": "Dirty project count",
        "expected_range": "0-5 projects normally",
        "action_if_outside": "Flag in morning summary if >5 dirty projects"
      },
      {
        "metric": "Stale projects (>3 days)",
        "expected": "0 projects",
        "action_if_missed": "ALERT in morning summary with project names"
      },
      {
        "metric": "Cron job execution",
        "expected": "daily at 6 AM",
        "action_if_missed": "Create NEEDS_ATTENTION.md if cron hasn't run in 48 hours"
      }
    ],
    "alert_conditions": [
      "If git-status-all.py fails: Try individual git status checks per project",
      "If >10 dirty projects: Alert for potential systematic issue",
      "If same project dirty >7 days: CRITICAL alert in morning summary"
    ]
  },

  "error_recovery": {
    "max_retries": 3,
    "retry_delay": "exponential backoff (1s, 2s, 4s)",
    "blockers": [
      "If git-status-all.py not found: Use individual 'git status' commands per project directory",
      "If cron setup fails (permission denied): Document in NEEDS_ATTENTION.md with manual setup instructions",
      "If project directory inaccessible: Skip that directory, flag in morning summary"
    ],
    "escalation": "If blocked >2 hours OR git monitoring completely fails, create NEEDS_ATTENTION.md"
  },

  "quality_checks": [
    {
      "check": "Script syntax validation",
      "rule": "git_status_monitor.sh passes shellcheck (or bash -n syntax check)",
      "action_if_fail": "Fix syntax errors, retry"
    },
    {
      "check": "Cron job format validation",
      "rule": "Cron expression '0 6 * * *' is valid (daily 6 AM)",
      "action_if_fail": "Flag in completion signal, provide corrected format"
    },
    {
      "check": "Morning summary format",
      "rule": "morning_summary.md has all required sections (counts, action items)",
      "action_if_fail": "Flag missing sections in completion signal"
    },
    {
      "check": "Test execution",
      "rule": "Manual test run produces valid morning_summary.md with current data",
      "action_if_fail": "Debug script, include error details in completion signal"
    }
  ],

  "completion_signal": {
    "signal_file": "~/openclaw-workspace/.signals/GIT-MONITOR-001-complete.json",
    "format": {
      "status": "success | partial | failed",
      "completion_time": "ISO 8601 timestamp",
      "deliverables_created": [
        "~/openclaw-workspace/automation/git_status_monitor.sh",
        "~/openclaw-workspace/automation/git_status_cron_setup.sh",
        "~/openclaw-workspace/.signals/morning_summary.md"
      ],
      "quality_checks_passed": 4,
      "quality_checks_failed": 0,
      "anomalies_detected": [],
      "warnings": [],
      "statistics": {
        "projects_scanned": "integer",
        "dirty_projects": "integer",
        "stale_projects": "integer",
        "cron_job_setup": "success | manual_required"
      },
      "next_steps_for_claude": [
        "Verify cron job with: crontab -l",
        "Test manually: bash ~/openclaw-workspace/automation/git_status_monitor.sh",
        "Review first morning summary tomorrow at 6 AM",
        "If cron setup failed (permissions), run setup script manually"
      ]
    }
  },

  "morning_summary": {
    "template": "~/openclaw-workspace/templates/git_morning_summary.md",
    "sections": [
      "## Git Status Summary",
      "## Projects Requiring Attention",
      "## Stale Projects (>3 days uncommitted)",
      "## Action Items for Claude"
    ],
    "max_length": "300 words",
    "tone": "concise, actionable"
  },

  "implementation_notes": {
    "template_format": "# Git Status Morning Summary: YYYY-MM-DD\n\n## Overview\n- Total projects scanned: X\n- Clean projects: Y\n- Projects with uncommitted changes: Z\n- Projects with unpushed commits: W\n- Stale projects (>3 days): V\n\n## Projects Requiring Attention\n[List project names if dirty count > 0]\n\n## Stale Projects (>3 days uncommitted)\n[List projects with last commit >3 days ago AND uncommitted changes]\n\n## Action Items for Claude\n- [ ] Review dirty projects (run with --details if needed)\n- [ ] Commit stale projects if work complete\n- [ ] Investigate why project X has been dirty >7 days\n",
    "cron_job_command": "0 6 * * * bash ~/openclaw-workspace/automation/git_status_monitor.sh > ~/openclaw-workspace/.signals/morning_summary.md 2>&1"
  },

  "notes": [
    "Billy should NOT attempt to commit changes - only monitor and report",
    "Billy should NOT modify any project files - read-only monitoring",
    "Billy should include enough context in summary for Claude to decide next steps",
    "If cron setup requires sudo/admin, Billy should document manual steps in NEEDS_ATTENTION.md"
  ]
}
